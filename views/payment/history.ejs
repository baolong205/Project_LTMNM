<%- include('../partials/header') %>
<div class="container">
  <h2>Lịch sử thanh toán</h2>
  <% if (errorMessage) { %>
    <div class="alert alert-danger"><%= errorMessage %></div>
  <% } else { %>
    <% if (successMessage) { %>
      <div class="alert alert-success"><%= successMessage %></div>
    <% } %>
    <% if (infoMessage) { %>
      <div class="alert alert-info"><%= infoMessage %></div>
    <% } %>
    <% if (!paymentHistory || paymentHistory.length === 0) { %>
      <p>Chưa có lịch sử thanh toán.</p>
    <% } else { %>
      <table class="table">
        <thead>
          <tr>
            <th>Bàn</th>
            <th>Tổng tiền</th>
            <th>Thời gian</th>
          </tr>
        </thead>
        <tbody>
          <% paymentHistory.forEach(history => { %>
            <tr>
              <td><%= history.tableNumber || 'N/A' %></td>
              <td><%= (history.total || 0).toLocaleString('vi-VN') %> đ</td>
              <td><%= history.createdAt ? new Date(history.createdAt).toLocaleString('vi-VN') : 'N/A' %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  <% } %>
</div>
<%- include('../partials/footer') %>