<%- include('../partials/header') %>

<!-- CSS trực tiếp trong file -->
<style>
    .main-body {
        background-color: white;
        border-radius: 5px;
        padding: 20px;
        margin-top: 20px;
        font-family: Arial, sans-serif;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
    }
    
    h3.text-center {
        color: #333;
        font-size: 24px;
        margin-bottom: 20px;
        text-align: left;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
    
    table th {
        background-color: #f5f5f5;
        text-align: left;
        padding: 8px;
        border-bottom: 1px solid #ddd;
        font-weight: normal;
    }
    
    table td {
        padding: 8px;
        border-bottom: 1px solid #eee;
    }
    
    h4.text-end {
        font-size: 18px;
        text-align: right;
        margin-top: 20px;
        padding-top: 10px;
        border-top: 1px dashed #ccc;
    }
    
    .btn-primary {
        background-color: #333;
        border: none;
        padding: 10px;
        margin-top: 20px;
    }
    
    .btn-primary:hover {
        background-color: #555;
    }

    .btn-secondary {
        background-color: #6c757d;
        border: none;
        padding: 10px;
        margin-top: 10px;
    }
    
    .btn-secondary:hover {
        background-color: #5a6268;
    }
    
    /* Style cho phần tổng thanh toán giống trong ảnh */
    .total-section {
        text-align: right;
        margin-top: 20px;
        font-weight: bold;
        font-size: 18px;
    }
    
    /* Thêm đường kẻ ngang như trong ảnh */
    .divider {
        border-top: 1px solid #eee;
        margin: 15px 0;
    }

    .button-group {
        display: flex;
        flex-direction: column;
    }
</style>

<!-- Bọc nội dung chính trong div để áp dụng CSS -->
<div class="main-body container">
    <% if (cart && Array.isArray(cart) && cart.length > 0) { %>
        <table class="table mt-3">
            <thead>
                <tr>
                    <th>Tên món</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                <% cart.forEach((item) => { %>
                    <tr>
                        <td><%= item.name %></td>
                        <td><%= item.quantity %></td>
                        <td><%= (item.price * item.quantity).toLocaleString('vi-VN') %> VND</td>
                    </tr>
                <% }) %>
            </tbody>
        </table>

        <div class="divider"></div>

        <div class="total-section">
            <h4>Tổng thanh toán</h4>
            <p><%= total > 0 ? total.toLocaleString('vi-VN') : 'N/A' %> VND</p>
        </div>

        <div class="button-group">
            <form action="/payment/confirm/<%= tableNumber %>" method="POST">
                <button type="submit" class="btn btn-primary w-100">Xác nhận thanh toán</button>
            </form>
            <a href="http://localhost:3000/payment" class="btn btn-secondary w-100 mt-2">Trở lại</a>
        </div>
    <% } else { %>
        <div class="alert alert-warning text-center mt-4">❌ Giỏ hàng trống hoặc không hợp lệ.</div>
        <a href="http://localhost:3000/payment" class="btn btn-secondary w-100 mt-2">Trở lại</a>
    <% } %>
</div>

<%- include('../partials/footer') %>